<?xml version="1.0" encoding="UTF-8"?>
<window>
    <defaultcontrol>300</defaultcontrol>
    <include>Action_Blur_Onload</include>
    <onload>ClearProperty(TMDbHelper.HideView,Home)</onload>
    <onload>SetProperty(TMDbHelper.WidgetContainer,301,Home)</onload>
    <onunload>ClearProperty(TMDbHelper.WidgetContainer,Home)</onunload>
    <onunload>ClearProperty(MenuSelect,Home)</onunload>
    <onunload>ClearProperty(AnimationDirection,Home)</onunload>
    <include>Action_ClearContext_OnUnload</include>
    <onload>RunScript(script.skinshortcuts,type=buildxml&amp;mainmenuID=300&amp;levels=1&amp;group=mainmenu|powermenu|searchmenu)</onload>
    <onload condition="Control.HasFocus(301)">SetFocus(300)</onload>
    <controls>

        <include>Background_Main</include>


        <!-- Fullscreen Widget -->
        <control type="group">
            <visible>Integer.IsEqual(Window(Home).Property(TMDBHelper.WidgetContainer),301)</visible>
            <visible>!String.IsEmpty(Container(300).ListItem.Property(widgetPath))</visible>
            <visible>!$EXP[Exp_InfoDialogs]</visible>
            <animation effect="fade" start="0" end="100" time="400" reversible="false">Visible</animation>
            <animation effect="fade" start="100" end="0" time="400" reversible="false">Hidden</animation>
            <include>Animation_Foreground_FadeInOut</include>
            <include>skinshortcuts-template-fullscreen-widget</include>
            <control type="image">
                <texture>common/vignetted.png</texture>
            </control>
        </control>

        <!-- All Widgets Group -->
        <control type="group" id="320">
            <animation type="Conditional" condition="Control.IsVisible(330)" reversible="false">
                <effect type="slide" end="0,-20" time="60" tween="sine" />
                <effect type="slide" end="0,20" time="180" tween="sine" delay="80" />
            </animation>
            <animation type="WindowOpen" reversible="false" condition="Window.Previous(1114)">
                <effect type="slide" start="320" end="0" time="400" delay="0" tween="cubic" easing="out" />
            </animation>
            <animation type="WindowClose" reversible="false" condition="Window.Next(1114)">
                <effect type="slide" start="0" end="320" time="300" delay="0" tween="cubic" easing="out" />
            </animation>
            <include>skinshortcuts-template-widgets</include>
        </control>

        <!-- Header -->
        <control type="group">
            <visible>!$EXP[Exp_InfoDialogs]</visible>
            <control type="group">
                <visible>!Window.IsVisible(favourites)</visible>
                <include>Furniture_Top_Right</include>
            </control>
            <!-- <control type="group">
                <animation effect="fade" start="0" end="100" time="200" delay="200" reversible="false">Visible</animation>
                <animation effect="fade" start="100" end="0" time="200" delay="0" reversible="false">Hidden</animation>
                <visible>![Control.HasFocus(300) | Control.HasFocus(399) | Control.HasFocus(302) | ControlGroup(303).HasFocus()]</visible>
                <include>Furniture_Top_Left</include>
            </control> -->
        </control>

        <!-- <include>Furniture_Bottom</include> -->

        <!-- Submenu -->
        <include content="Object_Options_Menu">
            <param name="visible" value="!Window.IsVisible(DialogSelect.xml) + !Window.IsVisible(favourites)" />
            <param name="onback" value="300" />
            <param name="id" value="302" />
            <param name="hasbuttonoverlay" value="false" />
            <param name="usegrouplist" value="false" />
            <param name="nib_pos" value="420" />
            <param name="useanimation" value="false" />
            <!-- <left>140</left> -->
            <left>180</left>
            <animation effect="slide" start="0" end="100" condition="Container(300).Position(1)">Conditional</animation>
            <animation effect="slide" start="0" end="200" condition="Container(300).Position(2)">Conditional</animation>
            <animation effect="slide" start="0" end="300" condition="Container(300).Position(3)">Conditional</animation>
            <animation effect="slide" start="0" end="400" condition="Container(300).Position(4)">Conditional</animation>
            <animation effect="slide" start="0" end="500" condition="Container(300).Position(5)">Conditional</animation>
            <animation effect="slide" start="0" end="600" condition="Container(300).Position(6)">Conditional</animation>
            <animation effect="slide" start="0" end="700" condition="Container(300).Position(7)">Conditional</animation>
            <animation effect="slide" start="0" end="800" condition="Container(300).Position(8)">Conditional</animation>
            <animation effect="slide" start="0" end="900" condition="Container(300).Position(9)">Conditional</animation>
            <animation effect="slide" start="0" end="1000" condition="Container(300).Position(10)">Conditional</animation>
            <animation type="Conditional" reversible="false" condition="Control.HasFocus(302)">
                <effect type="fade" start="0" end="100" time="300" />
                <effect type="slide" start="0,-48" end="0" center="auto" tween="back" easing="out" time="400" />
            </animation>
            <animation type="Conditional" reversible="false" condition="!Control.HasFocus(302)">
                <effect type="fade" start="100" end="0" time="0" />
            </animation>
            <animation type="WindowOpen" reversible="true" condition="Control.HasFocus(302)">
                <effect type="fade" start="0" end="100" time="300" />
                <effect type="slide" start="0,-48" end="0" center="auto" tween="back" easing="out" time="400" />
            </animation>
            <animation type="WindowClose" reversible="false">
                <effect type="fade" start="100" end="0" time="150" />
            </animation>
            <include content="List_DialogSelect">
                <param name="id" value="302" />
                <param name="itemlayout_include" value="Layout_Submenu" />
                <onleft>300</onleft>
                <onright>300</onright>
                <onback>300</onback>
                <ondown>302</ondown>
                <onup>302</onup>
                <top>row_height_x150</top>
                <bottom>row_height_x25</bottom>
                <content><include>skinshortcuts-submenu</include></content>
                <include>Animation_SlideIn_Dialog</include>
                <animation effect="slide" start="0" end="0,-1080" condition="!Control.HasFocus(302)">Conditional</animation>
            </include>
        </include>

        <!-- Menu bar -->
        <include content="Object_MenuBar_Group">
            <param name="overlay" value="false" />
            <param name="colordiffuse" value="main_fg_12" />
            <left>80</left>
            <visible>!$EXP[Exp_InfoDialogs]</visible>
            <animation effect="fade" start="100" end="0" condition="Window.Next(1114)">Conditional</animation>
            <include content="Object_Hidden_Button">
                <param name="id" value="399" />

                <onleft condition="String.IsEmpty(Container(300).ListItemNoWrap(-1).Label)">ClearProperty(AnimationDirection)</onleft>
                <onleft condition="String.IsEmpty(Container(300).ListItemNoWrap(-1).Label)">ActivateWindow(1114)</onleft>
                <onleft condition="!String.IsEmpty(Container(300).ListItemNoWrap(-1).Label)">SetProperty(AnimationDirection,Left)</onleft>
                <onleft condition="!String.IsEmpty(Container(300).ListItemNoWrap(-1).Label)">Control.Move(300,-1)</onleft>

                <onright condition="String.IsEmpty(Container(300).ListItemNoWrap(1).Label)">SetProperty(OptionsMenuFocused,303,Home)</onright>
                <onright condition="String.IsEmpty(Container(300).ListItemNoWrap(1).Label)">SetFocus(303)</onright>
                <onright condition="!String.IsEmpty(Container(300).ListItemNoWrap(1).Label)">SetProperty(AnimationDirection,Right)</onright>
                <onright condition="!String.IsEmpty(Container(300).ListItemNoWrap(1).Label)">Control.Move(300,1)</onright>
                <onfocus>ClearProperty(OptionsMenuFocused,Home)</onfocus>
                <onfocus>SetProperty(TMDbHelper.WidgetContainer,301,Home)</onfocus>
                <onup>SetFocus(302,0,absolute)</onup>
                <oninfo>SetFocus(302,0,absolute)</oninfo>
                <onclick>SetProperty(MenuSelect,1)</onclick>
                <onclick>SetFocus(300)</onclick>
                <onclick>Action(Select)</onclick>
                <include>skinshortcuts-template-menubar</include>
            </include>
            <control type="image">
                <left>20</left>
                <width>80</width>
                <height>60</height>
                <centertop>50%</centertop>
                <aspectratio>keep</aspectratio>
                <texture colordiffuse="main_fg_70">special://skin/extras/icons/search.png</texture>
            </control>
            <include content="Object_MenuBar_List">
                <param name="id" value="300" />
                <param name="color_nf" value="main_fg" />
                <param name="altfocus" value="Control.HasFocus(399)" />
                <onfocus condition="String.IsEmpty(Window.Property(MenuSelect))">SetFocus(399)</onfocus>
                <onfocus condition="String.IsEmpty(Window.Property(MenuSelect))">SetProperty(TMDbHelper.WidgetContainer,301,Home)</onfocus>
                <left>80</left>
                <include>skinshortcuts-template-menubar</include>
                <onfocus>ClearProperty(OptionsMenuFocused,Home)</onfocus>
                <onup>SetFocus(302,0,absolute)</onup>
                <oninfo>SetFocus(302,0,absolute)</oninfo>
                <onright>SetProperty(OptionsMenuFocused,303,Home)</onright>
                <onright>SetFocus(303)</onright>
                <onleft>ClearProperty(AnimationDirection)</onleft>
                <onleft>ActivateWindow(1114)</onleft>
                <content><include>skinshortcuts-mainmenu</include></content>
            </include>
        </include>

        <control type="group">
            <visible>Window.Next(1114)</visible>
            <left>view_pad</left>
            <top>60</top>
            <height>view_pad</height>
            <control type="group">
                <left>20</left>
                <width>740</width>
                <include content="Object_MenuBar_Group_Texture">
                    <param name="colordiffuse" value="main_fg_12" />
                    <left>-20</left>
                    <right>-20</right>
                    <height>60</height>
                    <centertop>50%</centertop>
                </include>
                <control type="group">
                    <height>70</height>
                    <centertop>50%</centertop>
                    <include content="Object_MenuBar_Item">
                        <param name="haslabel" value="false" />
                        <param name="selected" value="true" />
                        <param name="visible" value="true" />
                    </include>
                    <control type="image">
                        <left>10</left>
                        <width>60</width>
                        <aspectratio>keep</aspectratio>
                        <texture colordiffuse="$VAR[ColorSelected]">special://skin/extras/icons/search.png</texture>
                    </control>
                </control>
            </control>
        </control>

        <control type="button" id="330">
            <width>1</width>
            <height>1</height>
            <left>-1000</left>
            <onfocus>SetFocus(320)</onfocus>
            <onclick>SetFocus(320)</onclick>
            <visible allowhiddenfocus="true">Control.HasFocus(330)</visible>
            <animation effect="fade" time="300" start="0" end="0">Focus</animation>
        </control>

        <include content="Object_Options_Menu">
            <param name="grouplist_items" value="skinshortcuts-template-powermenu" />
            <param name="visible" value="!Window.IsVisible(DialogSelect.xml) + !Window.IsVisible(favourites)" />
            <param name="isfocused" value="!String.IsEmpty(Window(Home).Property(OptionsMenuFocused))" />
            <param name="onback" value="300" />
            <param name="id" value="303" />
        </include>

        <control type="button" id="360">
            <right>80</right>
            <centertop>100</centertop>
            <width>60</width>
            <height>60</height>
            <visible allowhiddenfocus="true">false</visible>
            <onleft>399</onleft>
            <onright>399</onright>
            <onup>399</onup>
            <ondown>399</ondown>
            <onclick condition="!String.IsEmpty(Window(Home).Property(OptionsMenuFocused))">ClearProperty(OptionsMenuFocused,Home)</onclick>
            <onclick condition="!String.IsEmpty(Window(Home).Property(OptionsMenuFocused))">SetFocus(399)</onclick>
            <onclick condition="String.IsEmpty(Window(Home).Property(OptionsMenuFocused))">SetProperty(OptionsMenuFocused,303,Home)</onclick>
            <onclick condition="String.IsEmpty(Window(Home).Property(OptionsMenuFocused))">SetFocus(303)</onclick>
            <!-- <onclick>ActivateWindow(shutdownmenu)</onclick> -->
        </control>


    </controls>
</window>
